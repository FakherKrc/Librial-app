{"ast":null,"code":"const state = {\n  ayantdroits: [],\n  checked: [],\n  numberItems: 50,\n  loader: 10,\n  currentColSorted: \"\",\n  currentSortType: \"\"\n};\nconst getters = {\n  allAyantdroits: state => state.ayantdroits,\n  allChecked: state => state.checked,\n  numberItems: state => state.numberItems,\n  allLoader: state => state.loader,\n  currentColSorted: state => state.currentColSorted\n};\nconst actions = {\n  async loadAyantdroits({\n    commit\n  }) {\n    commit('fetchLoader', true);\n    const response = await fetch(`http://localhost:3000/AyantDroits?_limit=${state.numberItems}`);\n    await new Promise(resolve => setTimeout(resolve, 4000));\n    const res = await response.json();\n    commit('loadAyantdroits', res);\n    commit('fetchChecked');\n    commit('fetchNumberItems');\n    commit('fetchLoader', false);\n    commit('sortLoad');\n  },\n  sortColumn({\n    commit\n  }, field) {\n    commit('sortObjectArray', field);\n  },\n  // i want to create a function that take fields array and do filter on ayantdroits array\n  filterAyantdroits({\n    commit\n  }, fields) {\n    let query = `http://localhost:3000/AyantDroits?`;\n    let arrayApi = ['identifiant', 'solde', 'montant_contrat'];\n    fields.forEach((field, index) => {\n      console.log(Object.values(field)[0]);\n      if (Object.values(field)[0] != '' && Object.keys(field)[0].slice(-3) == 'Min') {\n        if (Object.keys(field)[0].slice(0, -3) == 'solde') {\n          query += `${arrayApi[1]}_gte`;\n        } else {\n          query += `${arrayApi[2]}_gte`;\n        }\n        query += `=${Object.values(field)[0]}&`;\n      } else if (Object.values(field)[0] != '' && Object.keys(field)[0].slice(-3) == 'Max') {\n        if (Object.keys(field)[0].slice(0, -3) == 'solde') {\n          query += `${arrayApi[1]}_lte`;\n        } else {\n          query += `${arrayApi[2]}_lte`;\n        }\n        query += `=${Object.values(field)[0]}&`;\n      }\n    });\n    if (query.slice(-1) == '&') {\n      query = query.slice(0, -1);\n    }\n    console.log(\"query = \" + query);\n  }\n};\nconst mutations = {\n  loadAyantdroits: (state, ayantdroits) => state.ayantdroits = ayantdroits,\n  fetchChecked: state => {\n    state.checked = [...state.checked, ...Array(50).fill(false)];\n  },\n  fetchNumberItems: state => state.numberItems += 50,\n  fetchLoader: function (state, boolLoading) {\n    if (boolLoading && state.numberItems == 50) {\n      state.loader = 10;\n    } else if (boolLoading) {\n      state.loader = 3;\n    } else {\n      state.loader = 0;\n    }\n  },\n  sortLoad: function (state) {\n    let n = 0;\n    n = state.currentSortType == 'ASC' ? n = 1 : n = -1;\n    if (state.currentSortType != \"\") {\n      state.ayantdroits.sort((a, b) => {\n        console.log(n);\n        if (a[state.currentColSorted] > b[state.currentColSorted]) {\n          return n;\n        } else if (a[state.currentColSorted] < b[state.currentColSorted]) {\n          return -n;\n        } else {\n          return 0;\n        }\n      });\n    }\n  },\n  sortObjectArray: function (state, field) {\n    if (state.currentColSorted == field) {\n      if (state.ayantdroits[0][field] < state.ayantdroits[1][field]) {\n        state.ayantdroits.sort((a, b) => {\n          if (a[field] > b[field]) {\n            return -1;\n          } else if (a[field] < b[field]) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        state.currentSortType = 'ASC';\n      } else {\n        state.ayantdroits.sort((a, b) => {\n          if (a[field] < b[field]) {\n            return -1;\n          } else if (a[field] > b[field]) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        state.currentSortType = 'DSC';\n      }\n    } else {\n      state.ayantdroits.sort((a, b) => {\n        if (a[field] < b[field]) {\n          return -1;\n        } else if (a[field] > b[field]) {\n          return 1;\n        } else {\n          return 0;\n        }\n      });\n      state.currentColSorted = field;\n      state.currentSortType = 'ASC';\n    }\n  }\n};\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n};","map":{"version":3,"names":["state","ayantdroits","checked","numberItems","loader","currentColSorted","currentSortType","getters","allAyantdroits","allChecked","allLoader","actions","loadAyantdroits","commit","response","fetch","Promise","resolve","setTimeout","res","json","sortColumn","field","filterAyantdroits","fields","query","arrayApi","forEach","index","console","log","Object","values","keys","slice","mutations","fetchChecked","Array","fill","fetchNumberItems","fetchLoader","boolLoading","sortLoad","n","sort","a","b","sortObjectArray"],"sources":["C:/Users/33767/vueApp/vueapp/src/store/modules/table.js"],"sourcesContent":["const state = {\r\n    ayantdroits : [],\r\n    checked :  [], \r\n    numberItems : 50, \r\n    loader : 10,\r\n    currentColSorted : \"\",\r\n    currentSortType :\"\"\r\n    \r\n}; \r\n\r\nconst getters  ={\r\n    allAyantdroits : (state) => state.ayantdroits,\r\n    allChecked : (state) => state.checked,\r\n    numberItems : (state) => state.numberItems,\r\n    allLoader : (state) => state.loader,\r\n    currentColSorted : (state) => state.currentColSorted\r\n\r\n};\r\n\r\nconst actions = {\r\n    async loadAyantdroits({commit}){\r\n        commit('fetchLoader', true)\r\n        const response = await fetch(`http://localhost:3000/AyantDroits?_limit=${state.numberItems}`);\r\n        await new Promise(resolve => setTimeout(resolve, 4000));\r\n        const res = await response.json()\r\n        commit('loadAyantdroits', res)\r\n        commit('fetchChecked')\r\n        commit('fetchNumberItems')\r\n        commit('fetchLoader', false)\r\n        commit('sortLoad')\r\n    }, \r\n\r\n    sortColumn({commit}, field){\r\n      commit('sortObjectArray', field)\r\n    }, \r\n    // i want to create a function that take fields array and do filter on ayantdroits array\r\n    filterAyantdroits({commit}, fields){\r\n       let query = `http://localhost:3000/AyantDroits?`\r\n       let arrayApi = ['identifiant', 'solde', 'montant_contrat']\r\n         fields.forEach((field, index) => {\r\n            console.log(Object.values(field)[0])\r\n            if(Object.values(field)[0] != '' && Object.keys(field)[0].slice(-3) == 'Min'  ){\r\n                if(Object.keys(field)[0].slice(0, -3) == 'solde')\r\n                {\r\n                    query += `${arrayApi[1]}_gte`\r\n                }else{\r\n                    query += `${arrayApi[2]}_gte`\r\n                }\r\n                query += `=${Object.values(field)[0]}&`\r\n            }else if(Object.values(field)[0] != '' && Object.keys(field)[0].slice(-3) == 'Max'  ){\r\n                if(Object.keys(field)[0].slice(0, -3) == 'solde')\r\n                {\r\n                    query += `${arrayApi[1]}_lte`\r\n                }else{\r\n                    query += `${arrayApi[2]}_lte`\r\n                }\r\n                query += `=${Object.values(field)[0]}&`\r\n            }\r\n        } \r\n        \r\n        )\r\n        if(query.slice(-1) == '&'){\r\n            query = query.slice(0, -1)\r\n        }\r\n        console.log(\"query = \" + query)\r\n         \r\n    }\r\n  \r\n};\r\n\r\nconst mutations = {\r\n    loadAyantdroits : (state, ayantdroits) => state.ayantdroits = ayantdroits, \r\n    fetchChecked : (state) => { \r\n            state.checked = [...state.checked,...Array(50).fill(false)]\r\n        \r\n    },\r\n    fetchNumberItems : (state) => state.numberItems  += 50,\r\n    fetchLoader : function(state, boolLoading) {\r\n        if(boolLoading &&state.numberItems == 50){\r\n            state.loader = 10\r\n        }else if(boolLoading){\r\n            state.loader = 3\r\n        }else{\r\n            state.loader = 0\r\n        }\r\n    }, \r\n    sortLoad : function(state){\r\n        let n= 0\r\n        n = state.currentSortType == 'ASC' ? n= 1 : n = -1\r\n        if(state.currentSortType != \"\"){  \r\n            state.ayantdroits.sort((a, b) => {  \r\n                console.log(n) \r\n                if(a[state.currentColSorted] > b[state.currentColSorted]){\r\n                    return n\r\n                }else if(a[state.currentColSorted] < b[state.currentColSorted]){\r\n                    return -n\r\n                }else{\r\n                    return 0\r\n                }\r\n            })\r\n            \r\n        }\r\n    },\r\n    sortObjectArray : function(state, field) {\r\n        if(state.currentColSorted == field){\r\n            if(state.ayantdroits[0][field] < state.ayantdroits[1][field]){\r\n                state.ayantdroits.sort((a, b) => {\r\n            \r\n                    if(a[field] > b[field]){\r\n                        return -1\r\n                    }else if(a[field] < b[field]){\r\n                        return 1\r\n                    }else{\r\n                        return 0\r\n                    }\r\n                })\r\n                state.currentSortType = 'ASC'\r\n            }else{\r\n                state.ayantdroits.sort((a, b) => {\r\n            \r\n                    if(a[field] < b[field]){\r\n                        return -1\r\n                    }else if(a[field] > b[field]){\r\n                        return 1\r\n                    }else{\r\n                        return 0\r\n                    }\r\n                })\r\n                state.currentSortType = 'DSC'\r\n            }\r\n        }else{\r\n            state.ayantdroits.sort((a, b) => {\r\n            \r\n                if(a[field] < b[field]){\r\n                    return -1\r\n                }else if(a[field] > b[field]){\r\n                    return 1\r\n                }else{\r\n                    return 0\r\n                }\r\n            })\r\n\r\n            state.currentColSorted = field\r\n            state.currentSortType =  'ASC'\r\n        }\r\n       \r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default {\r\n    state, \r\n    getters, \r\n    actions, \r\n    mutations, \r\n\r\n}\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAG;EACVC,WAAW,EAAG,EAAE;EAChBC,OAAO,EAAI,EAAE;EACbC,WAAW,EAAG,EAAE;EAChBC,MAAM,EAAG,EAAE;EACXC,gBAAgB,EAAG,EAAE;EACrBC,eAAe,EAAE;AAErB,CAAC;AAED,MAAMC,OAAO,GAAG;EACZC,cAAc,EAAIR,KAAK,IAAKA,KAAK,CAACC,WAAW;EAC7CQ,UAAU,EAAIT,KAAK,IAAKA,KAAK,CAACE,OAAO;EACrCC,WAAW,EAAIH,KAAK,IAAKA,KAAK,CAACG,WAAW;EAC1CO,SAAS,EAAIV,KAAK,IAAKA,KAAK,CAACI,MAAM;EACnCC,gBAAgB,EAAIL,KAAK,IAAKA,KAAK,CAACK;AAExC,CAAC;AAED,MAAMM,OAAO,GAAG;EACZ,MAAMC,eAAe,CAAC;IAACC;EAAM,CAAC,EAAC;IAC3BA,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;IAC3B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,4CAA2Cf,KAAK,CAACG,WAAY,EAAC,CAAC;IAC7F,MAAM,IAAIa,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;IACvD,MAAME,GAAG,GAAG,MAAML,QAAQ,CAACM,IAAI,EAAE;IACjCP,MAAM,CAAC,iBAAiB,EAAEM,GAAG,CAAC;IAC9BN,MAAM,CAAC,cAAc,CAAC;IACtBA,MAAM,CAAC,kBAAkB,CAAC;IAC1BA,MAAM,CAAC,aAAa,EAAE,KAAK,CAAC;IAC5BA,MAAM,CAAC,UAAU,CAAC;EACtB,CAAC;EAEDQ,UAAU,CAAC;IAACR;EAAM,CAAC,EAAES,KAAK,EAAC;IACzBT,MAAM,CAAC,iBAAiB,EAAES,KAAK,CAAC;EAClC,CAAC;EACD;EACAC,iBAAiB,CAAC;IAACV;EAAM,CAAC,EAAEW,MAAM,EAAC;IAChC,IAAIC,KAAK,GAAI,oCAAmC;IAChD,IAAIC,QAAQ,GAAG,CAAC,aAAa,EAAE,OAAO,EAAE,iBAAiB,CAAC;IACxDF,MAAM,CAACG,OAAO,CAAC,CAACL,KAAK,EAAEM,KAAK,KAAK;MAC9BC,OAAO,CAACC,GAAG,CAACC,MAAM,CAACC,MAAM,CAACV,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MACpC,IAAGS,MAAM,CAACC,MAAM,CAACV,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAIS,MAAM,CAACE,IAAI,CAACX,KAAK,CAAC,CAAC,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,EAAG;QAC3E,IAAGH,MAAM,CAACE,IAAI,CAACX,KAAK,CAAC,CAAC,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,OAAO,EAChD;UACIT,KAAK,IAAK,GAAEC,QAAQ,CAAC,CAAC,CAAE,MAAK;QACjC,CAAC,MAAI;UACDD,KAAK,IAAK,GAAEC,QAAQ,CAAC,CAAC,CAAE,MAAK;QACjC;QACAD,KAAK,IAAK,IAAGM,MAAM,CAACC,MAAM,CAACV,KAAK,CAAC,CAAC,CAAC,CAAE,GAAE;MAC3C,CAAC,MAAK,IAAGS,MAAM,CAACC,MAAM,CAACV,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAIS,MAAM,CAACE,IAAI,CAACX,KAAK,CAAC,CAAC,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,EAAG;QACjF,IAAGH,MAAM,CAACE,IAAI,CAACX,KAAK,CAAC,CAAC,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,OAAO,EAChD;UACIT,KAAK,IAAK,GAAEC,QAAQ,CAAC,CAAC,CAAE,MAAK;QACjC,CAAC,MAAI;UACDD,KAAK,IAAK,GAAEC,QAAQ,CAAC,CAAC,CAAE,MAAK;QACjC;QACAD,KAAK,IAAK,IAAGM,MAAM,CAACC,MAAM,CAACV,KAAK,CAAC,CAAC,CAAC,CAAE,GAAE;MAC3C;IACJ,CAAC,CAEA;IACD,IAAGG,KAAK,CAACS,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,EAAC;MACtBT,KAAK,GAAGA,KAAK,CAACS,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC9B;IACAL,OAAO,CAACC,GAAG,CAAC,UAAU,GAAGL,KAAK,CAAC;EAEnC;AAEJ,CAAC;AAED,MAAMU,SAAS,GAAG;EACdvB,eAAe,EAAG,CAACZ,KAAK,EAAEC,WAAW,KAAKD,KAAK,CAACC,WAAW,GAAGA,WAAW;EACzEmC,YAAY,EAAIpC,KAAK,IAAK;IAClBA,KAAK,CAACE,OAAO,GAAG,CAAC,GAAGF,KAAK,CAACE,OAAO,EAAC,GAAGmC,KAAK,CAAC,EAAE,CAAC,CAACC,IAAI,CAAC,KAAK,CAAC,CAAC;EAEnE,CAAC;EACDC,gBAAgB,EAAIvC,KAAK,IAAKA,KAAK,CAACG,WAAW,IAAK,EAAE;EACtDqC,WAAW,EAAG,UAASxC,KAAK,EAAEyC,WAAW,EAAE;IACvC,IAAGA,WAAW,IAAGzC,KAAK,CAACG,WAAW,IAAI,EAAE,EAAC;MACrCH,KAAK,CAACI,MAAM,GAAG,EAAE;IACrB,CAAC,MAAK,IAAGqC,WAAW,EAAC;MACjBzC,KAAK,CAACI,MAAM,GAAG,CAAC;IACpB,CAAC,MAAI;MACDJ,KAAK,CAACI,MAAM,GAAG,CAAC;IACpB;EACJ,CAAC;EACDsC,QAAQ,EAAG,UAAS1C,KAAK,EAAC;IACtB,IAAI2C,CAAC,GAAE,CAAC;IACRA,CAAC,GAAG3C,KAAK,CAACM,eAAe,IAAI,KAAK,GAAGqC,CAAC,GAAE,CAAC,GAAGA,CAAC,GAAG,CAAC,CAAC;IAClD,IAAG3C,KAAK,CAACM,eAAe,IAAI,EAAE,EAAC;MAC3BN,KAAK,CAACC,WAAW,CAAC2C,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAC7BjB,OAAO,CAACC,GAAG,CAACa,CAAC,CAAC;QACd,IAAGE,CAAC,CAAC7C,KAAK,CAACK,gBAAgB,CAAC,GAAGyC,CAAC,CAAC9C,KAAK,CAACK,gBAAgB,CAAC,EAAC;UACrD,OAAOsC,CAAC;QACZ,CAAC,MAAK,IAAGE,CAAC,CAAC7C,KAAK,CAACK,gBAAgB,CAAC,GAAGyC,CAAC,CAAC9C,KAAK,CAACK,gBAAgB,CAAC,EAAC;UAC3D,OAAO,CAACsC,CAAC;QACb,CAAC,MAAI;UACD,OAAO,CAAC;QACZ;MACJ,CAAC,CAAC;IAEN;EACJ,CAAC;EACDI,eAAe,EAAG,UAAS/C,KAAK,EAAEsB,KAAK,EAAE;IACrC,IAAGtB,KAAK,CAACK,gBAAgB,IAAIiB,KAAK,EAAC;MAC/B,IAAGtB,KAAK,CAACC,WAAW,CAAC,CAAC,CAAC,CAACqB,KAAK,CAAC,GAAGtB,KAAK,CAACC,WAAW,CAAC,CAAC,CAAC,CAACqB,KAAK,CAAC,EAAC;QACzDtB,KAAK,CAACC,WAAW,CAAC2C,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;UAE7B,IAAGD,CAAC,CAACvB,KAAK,CAAC,GAAGwB,CAAC,CAACxB,KAAK,CAAC,EAAC;YACnB,OAAO,CAAC,CAAC;UACb,CAAC,MAAK,IAAGuB,CAAC,CAACvB,KAAK,CAAC,GAAGwB,CAAC,CAACxB,KAAK,CAAC,EAAC;YACzB,OAAO,CAAC;UACZ,CAAC,MAAI;YACD,OAAO,CAAC;UACZ;QACJ,CAAC,CAAC;QACFtB,KAAK,CAACM,eAAe,GAAG,KAAK;MACjC,CAAC,MAAI;QACDN,KAAK,CAACC,WAAW,CAAC2C,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;UAE7B,IAAGD,CAAC,CAACvB,KAAK,CAAC,GAAGwB,CAAC,CAACxB,KAAK,CAAC,EAAC;YACnB,OAAO,CAAC,CAAC;UACb,CAAC,MAAK,IAAGuB,CAAC,CAACvB,KAAK,CAAC,GAAGwB,CAAC,CAACxB,KAAK,CAAC,EAAC;YACzB,OAAO,CAAC;UACZ,CAAC,MAAI;YACD,OAAO,CAAC;UACZ;QACJ,CAAC,CAAC;QACFtB,KAAK,CAACM,eAAe,GAAG,KAAK;MACjC;IACJ,CAAC,MAAI;MACDN,KAAK,CAACC,WAAW,CAAC2C,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAE7B,IAAGD,CAAC,CAACvB,KAAK,CAAC,GAAGwB,CAAC,CAACxB,KAAK,CAAC,EAAC;UACnB,OAAO,CAAC,CAAC;QACb,CAAC,MAAK,IAAGuB,CAAC,CAACvB,KAAK,CAAC,GAAGwB,CAAC,CAACxB,KAAK,CAAC,EAAC;UACzB,OAAO,CAAC;QACZ,CAAC,MAAI;UACD,OAAO,CAAC;QACZ;MACJ,CAAC,CAAC;MAEFtB,KAAK,CAACK,gBAAgB,GAAGiB,KAAK;MAC9BtB,KAAK,CAACM,eAAe,GAAI,KAAK;IAClC;EAEJ;AACJ,CAAC;AAMD,eAAe;EACXN,KAAK;EACLO,OAAO;EACPI,OAAO;EACPwB;AAEJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}