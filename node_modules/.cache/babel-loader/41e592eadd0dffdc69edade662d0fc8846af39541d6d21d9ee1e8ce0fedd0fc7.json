{"ast":null,"code":"const state = {\n  ayantdroits: [],\n  checked: [],\n  numberItems: 50,\n  loader: 10,\n  currentColSorted: \"\",\n  currentSortType: \"\"\n};\nconst getters = {\n  allAyantdroits: state => state.ayantdroits,\n  allChecked: state => state.checked,\n  numberItems: state => state.numberItems,\n  allLoader: state => state.loader,\n  currentColSorted: state => state.currentColSorted\n};\nconst actions = {\n  async loadAyantdroits({\n    commit\n  }) {\n    commit('fetchLoader', true);\n    const response = await fetch(`http://localhost:3000/AyantDroits?_limit=${state.numberItems}`);\n    await new Promise(resolve => setTimeout(resolve, 4000));\n    const res = await response.json();\n    commit('loadAyantdroits', res);\n    console.log(\"combien de fois\");\n    commit('sortLoad');\n    commit('fetchChecked');\n    commit('fetchNumberItems');\n    commit('fetchLoader', false);\n  },\n  sortColumn({\n    commit\n  }, field) {\n    commit('sortObjectArray', field);\n  }\n};\nconst mutations = {\n  loadAyantdroits: (state, ayantdroits) => state.ayantdroits = ayantdroits,\n  fetchChecked: state => state.checked = Array(state.ayantdroits.length).fill(false),\n  fetchNumberItems: state => state.numberItems += 50,\n  fetchLoader: function (state, boolLoading) {\n    if (boolLoading && state.numberItems == 50) {\n      state.loader = 10;\n    } else if (boolLoading) {\n      state.loader = 3;\n    } else {\n      state.loader = 0;\n    }\n  },\n  sortLoad: function (state, field) {\n    let n = 0;\n    n = state.currentSortType == 'ASC' ? n = 1 : n = -1;\n    console.log(n);\n    if (state.currentColSorted != \"\") {\n      console.log(\"*****\");\n      state.ayantdroits.sort((a, b) => {\n        if (a[field] > b[field]) {\n          return n;\n        } else if (a[field] < b[field]) {\n          return n;\n        } else {\n          return 0;\n        }\n      });\n    }\n  },\n  sortObjectArray: function (state, field) {\n    if (state.currentColSorted == field) {\n      if (state.ayantdroits[0][field] < state.ayantdroits[1][field]) {\n        state.ayantdroits.sort((a, b) => {\n          if (a[field] > b[field]) {\n            return -1;\n          } else if (a[field] < b[field]) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        state.currentColType = 'ASC';\n      } else {\n        state.ayantdroits.sort((a, b) => {\n          if (a[field] < b[field]) {\n            return -1;\n          } else if (a[field] > b[field]) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        state.currentColType = 'DSC';\n      }\n    } else {\n      state.ayantdroits.sort((a, b) => {\n        if (a[field] < b[field]) {\n          return -1;\n        } else if (a[field] > b[field]) {\n          return 1;\n        } else {\n          return 0;\n        }\n      });\n      state.currentColSorted = field;\n      state.currentColType = 'ASC';\n    }\n  }\n};\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n};","map":{"version":3,"names":["state","ayantdroits","checked","numberItems","loader","currentColSorted","currentSortType","getters","allAyantdroits","allChecked","allLoader","actions","loadAyantdroits","commit","response","fetch","Promise","resolve","setTimeout","res","json","console","log","sortColumn","field","mutations","fetchChecked","Array","length","fill","fetchNumberItems","fetchLoader","boolLoading","sortLoad","n","sort","a","b","sortObjectArray","currentColType"],"sources":["C:/Users/33767/vueApp/vueapp/src/store/modules/table.js"],"sourcesContent":["const state = {\r\n    ayantdroits : [],\r\n    checked :  [], \r\n    numberItems : 50, \r\n    loader : 10,\r\n    currentColSorted : \"\",\r\n    currentSortType :\"\"\r\n    \r\n}; \r\n\r\nconst getters  ={\r\n    allAyantdroits : (state) => state.ayantdroits,\r\n    allChecked : (state) => state.checked,\r\n    numberItems : (state) => state.numberItems,\r\n    allLoader : (state) => state.loader,\r\n    currentColSorted : (state) => state.currentColSorted\r\n\r\n};\r\n\r\nconst actions = {\r\n    async loadAyantdroits({commit}){\r\n        commit('fetchLoader', true)\r\n        const response = await fetch(`http://localhost:3000/AyantDroits?_limit=${state.numberItems}`);\r\n        await new Promise(resolve => setTimeout(resolve, 4000));\r\n        const res = await response.json()\r\n        commit('loadAyantdroits', res)\r\n        console.log(\"combien de fois\")\r\n        commit('sortLoad')\r\n        commit('fetchChecked')\r\n        commit('fetchNumberItems')\r\n        commit('fetchLoader', false)\r\n    }, \r\n\r\n    sortColumn({commit}, field){\r\n      commit('sortObjectArray', field)\r\n    }\r\n\r\n};\r\n\r\nconst mutations = {\r\n    loadAyantdroits : (state, ayantdroits) => state.ayantdroits = ayantdroits, \r\n    fetchChecked : (state) => state.checked = Array(state.ayantdroits.length).fill(false),\r\n    fetchNumberItems : (state) => state.numberItems  += 50,\r\n    fetchLoader : function(state, boolLoading) {\r\n        if(boolLoading &&state.numberItems == 50){\r\n            state.loader = 10\r\n        }else if(boolLoading){\r\n            state.loader = 3\r\n        }else{\r\n            state.loader = 0\r\n        }\r\n    }, \r\n    sortLoad : function(state, field){\r\n        let n= 0\r\n        n = state.currentSortType == 'ASC' ? n= 1 : n = -1\r\n        console.log(n)\r\n        if(state.currentColSorted != \"\"){\r\n            console.log(\"*****\")\r\n            state.ayantdroits.sort((a, b) => {   \r\n                if(a[field] > b[field]){\r\n                    return n\r\n                }else if(a[field] < b[field]){\r\n                    return n\r\n                }else{\r\n                    return 0\r\n                }\r\n            })\r\n        }\r\n    },\r\n    sortObjectArray : function(state, field) {\r\n        if(state.currentColSorted == field){\r\n            if(state.ayantdroits[0][field] < state.ayantdroits[1][field]){\r\n                state.ayantdroits.sort((a, b) => {\r\n            \r\n                    if(a[field] > b[field]){\r\n                        return -1\r\n                    }else if(a[field] < b[field]){\r\n                        return 1\r\n                    }else{\r\n                        return 0\r\n                    }\r\n                })\r\n                state.currentColType = 'ASC'\r\n            }else{\r\n                state.ayantdroits.sort((a, b) => {\r\n            \r\n                    if(a[field] < b[field]){\r\n                        return -1\r\n                    }else if(a[field] > b[field]){\r\n                        return 1\r\n                    }else{\r\n                        return 0\r\n                    }\r\n                })\r\n                state.currentColType = 'DSC'\r\n            }\r\n        }else{\r\n            state.ayantdroits.sort((a, b) => {\r\n            \r\n                if(a[field] < b[field]){\r\n                    return -1\r\n                }else if(a[field] > b[field]){\r\n                    return 1\r\n                }else{\r\n                    return 0\r\n                }\r\n            })\r\n\r\n            state.currentColSorted = field\r\n            state.currentColType =  'ASC'\r\n        }\r\n       \r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default {\r\n    state, \r\n    getters, \r\n    actions, \r\n    mutations, \r\n\r\n}\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAG;EACVC,WAAW,EAAG,EAAE;EAChBC,OAAO,EAAI,EAAE;EACbC,WAAW,EAAG,EAAE;EAChBC,MAAM,EAAG,EAAE;EACXC,gBAAgB,EAAG,EAAE;EACrBC,eAAe,EAAE;AAErB,CAAC;AAED,MAAMC,OAAO,GAAG;EACZC,cAAc,EAAIR,KAAK,IAAKA,KAAK,CAACC,WAAW;EAC7CQ,UAAU,EAAIT,KAAK,IAAKA,KAAK,CAACE,OAAO;EACrCC,WAAW,EAAIH,KAAK,IAAKA,KAAK,CAACG,WAAW;EAC1CO,SAAS,EAAIV,KAAK,IAAKA,KAAK,CAACI,MAAM;EACnCC,gBAAgB,EAAIL,KAAK,IAAKA,KAAK,CAACK;AAExC,CAAC;AAED,MAAMM,OAAO,GAAG;EACZ,MAAMC,eAAe,CAAC;IAACC;EAAM,CAAC,EAAC;IAC3BA,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;IAC3B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,4CAA2Cf,KAAK,CAACG,WAAY,EAAC,CAAC;IAC7F,MAAM,IAAIa,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;IACvD,MAAME,GAAG,GAAG,MAAML,QAAQ,CAACM,IAAI,EAAE;IACjCP,MAAM,CAAC,iBAAiB,EAAEM,GAAG,CAAC;IAC9BE,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;IAC9BT,MAAM,CAAC,UAAU,CAAC;IAClBA,MAAM,CAAC,cAAc,CAAC;IACtBA,MAAM,CAAC,kBAAkB,CAAC;IAC1BA,MAAM,CAAC,aAAa,EAAE,KAAK,CAAC;EAChC,CAAC;EAEDU,UAAU,CAAC;IAACV;EAAM,CAAC,EAAEW,KAAK,EAAC;IACzBX,MAAM,CAAC,iBAAiB,EAAEW,KAAK,CAAC;EAClC;AAEJ,CAAC;AAED,MAAMC,SAAS,GAAG;EACdb,eAAe,EAAG,CAACZ,KAAK,EAAEC,WAAW,KAAKD,KAAK,CAACC,WAAW,GAAGA,WAAW;EACzEyB,YAAY,EAAI1B,KAAK,IAAKA,KAAK,CAACE,OAAO,GAAGyB,KAAK,CAAC3B,KAAK,CAACC,WAAW,CAAC2B,MAAM,CAAC,CAACC,IAAI,CAAC,KAAK,CAAC;EACrFC,gBAAgB,EAAI9B,KAAK,IAAKA,KAAK,CAACG,WAAW,IAAK,EAAE;EACtD4B,WAAW,EAAG,UAAS/B,KAAK,EAAEgC,WAAW,EAAE;IACvC,IAAGA,WAAW,IAAGhC,KAAK,CAACG,WAAW,IAAI,EAAE,EAAC;MACrCH,KAAK,CAACI,MAAM,GAAG,EAAE;IACrB,CAAC,MAAK,IAAG4B,WAAW,EAAC;MACjBhC,KAAK,CAACI,MAAM,GAAG,CAAC;IACpB,CAAC,MAAI;MACDJ,KAAK,CAACI,MAAM,GAAG,CAAC;IACpB;EACJ,CAAC;EACD6B,QAAQ,EAAG,UAASjC,KAAK,EAAEwB,KAAK,EAAC;IAC7B,IAAIU,CAAC,GAAE,CAAC;IACRA,CAAC,GAAGlC,KAAK,CAACM,eAAe,IAAI,KAAK,GAAG4B,CAAC,GAAE,CAAC,GAAGA,CAAC,GAAG,CAAC,CAAC;IAClDb,OAAO,CAACC,GAAG,CAACY,CAAC,CAAC;IACd,IAAGlC,KAAK,CAACK,gBAAgB,IAAI,EAAE,EAAC;MAC5BgB,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;MACpBtB,KAAK,CAACC,WAAW,CAACkC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAC7B,IAAGD,CAAC,CAACZ,KAAK,CAAC,GAAGa,CAAC,CAACb,KAAK,CAAC,EAAC;UACnB,OAAOU,CAAC;QACZ,CAAC,MAAK,IAAGE,CAAC,CAACZ,KAAK,CAAC,GAAGa,CAAC,CAACb,KAAK,CAAC,EAAC;UACzB,OAAOU,CAAC;QACZ,CAAC,MAAI;UACD,OAAO,CAAC;QACZ;MACJ,CAAC,CAAC;IACN;EACJ,CAAC;EACDI,eAAe,EAAG,UAAStC,KAAK,EAAEwB,KAAK,EAAE;IACrC,IAAGxB,KAAK,CAACK,gBAAgB,IAAImB,KAAK,EAAC;MAC/B,IAAGxB,KAAK,CAACC,WAAW,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC,GAAGxB,KAAK,CAACC,WAAW,CAAC,CAAC,CAAC,CAACuB,KAAK,CAAC,EAAC;QACzDxB,KAAK,CAACC,WAAW,CAACkC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;UAE7B,IAAGD,CAAC,CAACZ,KAAK,CAAC,GAAGa,CAAC,CAACb,KAAK,CAAC,EAAC;YACnB,OAAO,CAAC,CAAC;UACb,CAAC,MAAK,IAAGY,CAAC,CAACZ,KAAK,CAAC,GAAGa,CAAC,CAACb,KAAK,CAAC,EAAC;YACzB,OAAO,CAAC;UACZ,CAAC,MAAI;YACD,OAAO,CAAC;UACZ;QACJ,CAAC,CAAC;QACFxB,KAAK,CAACuC,cAAc,GAAG,KAAK;MAChC,CAAC,MAAI;QACDvC,KAAK,CAACC,WAAW,CAACkC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;UAE7B,IAAGD,CAAC,CAACZ,KAAK,CAAC,GAAGa,CAAC,CAACb,KAAK,CAAC,EAAC;YACnB,OAAO,CAAC,CAAC;UACb,CAAC,MAAK,IAAGY,CAAC,CAACZ,KAAK,CAAC,GAAGa,CAAC,CAACb,KAAK,CAAC,EAAC;YACzB,OAAO,CAAC;UACZ,CAAC,MAAI;YACD,OAAO,CAAC;UACZ;QACJ,CAAC,CAAC;QACFxB,KAAK,CAACuC,cAAc,GAAG,KAAK;MAChC;IACJ,CAAC,MAAI;MACDvC,KAAK,CAACC,WAAW,CAACkC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAE7B,IAAGD,CAAC,CAACZ,KAAK,CAAC,GAAGa,CAAC,CAACb,KAAK,CAAC,EAAC;UACnB,OAAO,CAAC,CAAC;QACb,CAAC,MAAK,IAAGY,CAAC,CAACZ,KAAK,CAAC,GAAGa,CAAC,CAACb,KAAK,CAAC,EAAC;UACzB,OAAO,CAAC;QACZ,CAAC,MAAI;UACD,OAAO,CAAC;QACZ;MACJ,CAAC,CAAC;MAEFxB,KAAK,CAACK,gBAAgB,GAAGmB,KAAK;MAC9BxB,KAAK,CAACuC,cAAc,GAAI,KAAK;IACjC;EAEJ;AACJ,CAAC;AAMD,eAAe;EACXvC,KAAK;EACLO,OAAO;EACPI,OAAO;EACPc;AAEJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}